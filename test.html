<html>
<style type="text/css">
  body{overflow:hidden;}
  #iframe{display:none;}
  #div{position:absolute;top:0px;left:0px;width:100%;height:10000px;}
  #saveButton{z-index:2;position:absolute;top:0px;right:0px;}
</style>
<script>
function save(){
  var note = document.getElementById('div').innerHTML;
  note = note.replace(/(<div><br>)*<\/div>/g, '\n');
  note = note.replace(/<div>/g, '');
  /* replaces some html entities */
  note = note.replace(/&nbsp;/g, ' ');
  note = note.replace(/&amp;/g, '&');
  note = note.replace(/&lt;/g, '<');
  note = note.replace(/&gt;/g, '>');
  document.getElementById('saveButton').setAttribute(
    'href',
    'data:Content-type: text/plain, ' + escape(note)
  );
}
</script>
<a id="saveButton" target="download" download="note.txt" href="#" onclick="save();">Save</a>
<iframe id="iframe"></iframe>
<div contenteditable id="div"></div>
</html>